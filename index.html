<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iran GeoJSON Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #0a0e27;
            color: #fff;
        }

        #map {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
        }

        .info-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px 25px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            max-width: 320px;
            backdrop-filter: blur(10px);
        }

        .info-panel h1 {
            color: #0a0e27;
            font-size: 24px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .flag {
            font-size: 32px;
        }

        .info-item {
            margin: 10px 0;
            color: #333;
        }

        .info-label {
            font-weight: 600;
            color: #666;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-value {
            font-size: 16px;
            color: #0a0e27;
            margin-top: 2px;
        }

        .download-btn {
            margin-top: 15px;
            width: 100%;
            padding: 12px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .download-btn:hover {
            background: #218838;
        }

        .leaflet-popup-content-wrapper {
            border-radius: 8px;
        }

        .leaflet-popup-content {
            font-size: 14px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <div class="info-panel">
        <h1><span class="flag">ðŸ‡®ðŸ‡·</span> Iran</h1>
        <div class="info-item">
            <div class="info-label">Persian Name</div>
            <div class="info-value">Ø§ÛŒØ±Ø§Ù†</div>
        </div>
        <div class="info-item">
            <div class="info-label">Capital</div>
            <div class="info-value">Tehran</div>
        </div>
        <div class="info-item">
            <div class="info-label">Population</div>
            <div class="info-value">88,550,570</div>
        </div>
        <div class="info-item">
            <div class="info-label">Area</div>
            <div class="info-value">1,648,195 kmÂ²</div>
        </div>
        <div class="info-item">
            <div class="info-label">ISO Code</div>
            <div class="info-value">IR / IRN</div>
        </div>
        <button class="download-btn" onclick="downloadGeoJSON()">
            ðŸ“¥ Download GeoJSON
        </button>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Initialize map centered on Iran
        const map = L.map('map', {
            center: [32.4279, 53.6880],
            zoom: 6,
            zoomControl: true,
            attributionControl: true
        });

        // Add satellite tile layer
        L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri',
            maxZoom: 18
        }).addTo(map);

        // Add labels overlay
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; OpenStreetMap contributors &copy; CARTO',
            subdomains: 'abcd',
            maxZoom: 18
        }).addTo(map);

        // GeoJSON data
        const iranGeoJSON = {
            "type": "FeatureCollection",
            "features": [{
                "type": "Feature",
                "properties": {
                    "name": "Iran",
                    "name_fa": "Ø§ÛŒØ±Ø§Ù†",
                    "iso_a2": "IR",
                    "iso_a3": "IRN",
                    "capital": "Tehran",
                    "population": 88550570,
                    "area_km2": 1648195
                },
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [[
                        [44.77267, 37.17045], [44.7939, 37.29016], [44.59878, 37.44095],
                        [44.77267, 37.58811], [44.82092, 37.7138], [44.60428, 37.75161],
                        [44.42575, 37.84566], [44.41179, 37.9922], [44.24519, 38.28051],
                        [44.37548, 38.38289], [44.2253, 38.74963], [44.42131, 39.00492],
                        [44.79399, 39.71309], [44.95209, 39.33989], [45.45772, 39.00732],
                        [45.89817, 38.79201], [46.13788, 38.87485], [46.50258, 38.77008],
                        [47.00571, 39.0578], [47.68528, 39.5081], [48.06009, 39.58223],
                        [48.35552, 39.28876], [48.01074, 38.79406], [48.58435, 38.41636],
                        [48.88324, 38.32024], [49.19961, 37.57874], [50.14777, 37.37456],
                        [50.84235, 36.87068], [52.26402, 36.70014], [53.82579, 36.96483],
                        [53.92159, 37.19873], [54.80025, 37.39237], [55.51157, 37.96411],
                        [56.18037, 37.93512], [56.61936, 38.12127], [57.33043, 38.02922],
                        [58.43628, 37.52253], [59.23476, 37.41299], [60.37763, 36.52738],
                        [61.12301, 36.49160], [61.21081, 35.65007], [61.12301, 34.30479],
                        [60.80319, 34.40410], [60.52843, 33.67659], [60.96198, 33.52883],
                        [60.53638, 33.10808], [60.87026, 32.18293], [60.94194, 31.54807],
                        [61.69931, 31.37950], [61.78126, 30.73585], [60.87424, 29.82959],
                        [61.36930, 29.30278], [61.77187, 28.69930], [62.72783, 28.25964],
                        [62.75542, 27.37729], [63.23389, 27.21701], [63.31663, 26.75651],
                        [61.87418, 26.23993], [61.49736, 25.07828], [59.61613, 25.38084],
                        [58.52571, 25.60996], [57.39725, 25.73990], [56.97083, 26.96668],
                        [56.49252, 27.14330], [55.72371, 26.96463], [54.71509, 26.48058],
                        [53.49309, 26.81236], [52.48359, 27.57914], [51.52076, 27.86569],
                        [50.85294, 28.81479], [50.11547, 30.14777], [49.57685, 29.98581],
                        [48.94133, 30.31708], [48.56782, 29.92667], [48.01763, 30.45239],
                        [48.00485, 30.98538], [47.68528, 30.98407], [47.84915, 31.70917],
                        [47.33466, 32.46915], [46.10936, 33.01700], [45.41669, 33.96792],
                        [45.64845, 34.74867], [46.15178, 35.09326], [46.07634, 35.67738],
                        [45.42061, 35.97774], [44.77267, 37.17045]
                    ]]
                }
            }]
        };

        // Style for the polygon
        const iranStyle = {
            fillColor: '#00d4ff',
            fillOpacity: 0.3,
            color: '#00ff88',
            weight: 3,
            opacity: 0.9
        };

        // Add GeoJSON layer to map
        const iranLayer = L.geoJSON(iranGeoJSON, {
            style: iranStyle,
            onEachFeature: function(feature, layer) {
                if (feature.properties) {
                    const props = feature.properties;
                    layer.bindPopup(`
                        <div style="min-width: 200px;">
                            <h3 style="margin: 0 0 10px 0; color: #0a0e27;">${props.name} (${props.name_fa})</h3>
                            <p style="margin: 5px 0;"><strong>Capital:</strong> ${props.capital}</p>
                            <p style="margin: 5px 0;"><strong>Population:</strong> ${props.population.toLocaleString()}</p>
                            <p style="margin: 5px 0;"><strong>Area:</strong> ${props.area_km2.toLocaleString()} kmÂ²</p>
                            <p style="margin: 5px 0;"><strong>ISO:</strong> ${props.iso_a2} / ${props.iso_a3}</p>
                        </div>
                    `);
                }
            }
        }).addTo(map);

        // Fit map to Iran bounds
        map.fitBounds(iranLayer.getBounds());

        // Download function
        function downloadGeoJSON() {
            const dataStr = JSON.stringify(iranGeoJSON, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'iran.geojson';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
